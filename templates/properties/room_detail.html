{% extends "base.html" %}
{% load static %}

{% block title %}{{ room.full_room_identifier }} - {{ block.super }}{% endblock %}

{% block content %}
<div class="space-y-6">
  <!-- Header -->
  <div class="flex items-center justify-between">
    <h1 class="text-3xl font-bold text-gray-900">{{ room.full_room_identifier }}</h1>
    <div class="flex space-x-3">
      <a href="{% url 'properties:room_update' room.pk %}" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium">
        Edit Room
      </a>
      <a href="{% url 'properties:room_delete' room.pk %}" class="bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-md text-sm font-medium"
         onclick="return confirm('Are you sure you want to delete this room?')">
        Delete Room
      </a>
    </div>
  </div>

  <!-- Room Info Cards -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
    <!-- Basic Info -->
    <div class="bg-white shadow rounded-lg">
      <div class="p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Room Information</h3>
        <dl class="space-y-3">
          <div>
            <dt class="text-sm font-medium text-gray-500">Room Number</dt>
            <dd class="text-sm text-gray-900">{{ room.room_number }}</dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-gray-500">Floor</dt>
            <dd class="text-sm text-gray-900">{{ room.floor }}</dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-gray-500">Type</dt>
            <dd class="text-sm text-gray-900">{{ room.get_room_type_display }}</dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-gray-500">Capacity</dt>
            <dd class="text-sm text-gray-900">{{ room.capacity }}</dd>
          </div>
        </dl>
      </div>
    </div>

    <!-- Financial Info -->
    <div class="bg-white shadow rounded-lg">
      <div class="p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Financial Details</h3>
        <dl class="space-y-3">
          <div>
            <dt class="text-sm font-medium text-gray-500">Monthly Rent</dt>
            <dd class="text-lg font-semibold text-gray-900">KSh {{ room.rent_amount|floatformat:0 }}</dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-gray-500">Deposit</dt>
            <dd class="text-sm text-gray-900">KSh {{ room.deposit_amount|floatformat:0 }}</dd>
          </div>
        </dl>
      </div>
    </div>

    <!-- Status -->
    <div class="bg-white shadow rounded-lg">
      <div class="p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Status</h3>
        <div class="space-y-3">
          <div>
            <span class="inline-flex px-2 py-1 text-xs font-medium rounded-full
              {% if room.status == 'available' %}bg-green-100 text-green-800
              {% elif room.status == 'occupied' %}bg-blue-100 text-blue-800
              {% elif room.status == 'maintenance' %}bg-yellow-100 text-yellow-800
              {% else %}bg-gray-100 text-gray-800{% endif %}">
              {{ room.get_status_display }}
            </span>
          </div>
          {% if room.current_tenant %}
          <div>
            <dt class="text-sm font-medium text-gray-500">Current Tenant</dt>
            <dd class="text-sm text-gray-900">{{ room.current_tenant.name }}</dd>
            <dd class="text-sm text-gray-500">{{ room.current_tenant.phone }}</dd>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Location -->
    <div class="bg-white shadow rounded-lg">
      <div class="p-6">
        <h3 class="text-lg font-medium text-gray-900 mb-4">Location</h3>
        <dl class="space-y-3">
          <div>
            <dt class="text-sm font-medium text-gray-500">Building</dt>
            <dd class="text-sm text-gray-900">
              <a href="{% url 'properties:location_detail' room.location.pk %}" class="text-blue-600 hover:text-blue-800">
                {{ room.location.name }}
              </a>
            </dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-gray-500">Address</dt>
            <dd class="text-sm text-gray-900">{{ room.location.address }}</dd>
          </div>
          <div>
            <dt class="text-sm font-medium text-gray-500">City</dt>
            <dd class="text-sm text-gray-900">{{ room.location.city }}</dd>
          </div>
        </dl>
      </div>
    </div>
  </div>

  <!-- Description -->
  {% if room.description %}
  <div class="bg-white shadow rounded-lg">
    <div class="p-6">
      <h3 class="text-lg font-medium text-gray-900 mb-4">Description</h3>
      <p class="text-gray-700">{{ room.description }}</p>
    </div>
  </div>
  {% endif %}

  <!-- Quick Actions -->
  <div class="bg-white shadow rounded-lg">
    <div class="px-6 py-4 border-b border-gray-200">
      <h3 class="text-lg font-medium text-gray-900">Quick Actions</h3>
    </div>
    <div class="p-6">
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        {% if room.current_tenant %}
        <a href="{% url 'properties:room_remove_tenant' room.pk %}" class="flex items-center justify-center px-4 py-2 border border-red-300 rounded-md shadow-sm text-sm font-medium text-red-700 bg-white hover:bg-red-50"
           onclick="return confirm('Are you sure you want to remove the tenant from this room?')">
          Remove Tenant
        </a>
        {% else %}
        <a href="{% url 'properties:room_assign_tenant' room.pk %}" class="flex items-center justify-center px-4 py-2 border border-green-300 rounded-md shadow-sm text-sm font-medium text-green-700 bg-white hover:bg-green-50">
          Assign Tenant
        </a>
        {% endif %}
        <a href="{% url 'payments:payment_create' %}?room={{ room.pk }}" class="flex items-center justify-center px-4 py-2 border border-blue-300 rounded-md shadow-sm text-sm font-medium text-blue-700 bg-white hover:bg-blue-50">
          Record Payment
        </a>
        <a href="{% url 'maintenance:maintenance_request_create' %}?room={{ room.pk }}" class="flex items-center justify-center px-4 py-2 border border-orange-300 rounded-md shadow-sm text-sm font-medium text-orange-700 bg-white hover:bg-orange-50">
          Report Issue
        </a>
        <a href="{% url 'properties:room_update' room.pk %}" class="flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
          Edit Details
        </a>
      </div>
    </div>
  </div>
</div>
{% endblock %}
